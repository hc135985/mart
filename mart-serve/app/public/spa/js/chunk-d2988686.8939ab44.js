(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2988686"],{"0517":function(e,t,n){"use strict";n("4bf8"),n("5c98"),n("9dff"),n("abea"),n("c549"),n("652c")},"2f1f":function(e,t,n){},"652c":function(e,t,n){},"9b1c":function(e,t,n){"use strict";var r=n("2f1f"),a=n.n(r);a.a},b6f5:function(e,t,n){"use strict";var r=n("d601"),a=n("a593"),u=n("23c4"),s=n.n(u),o=n("d11a"),i=n("1a98"),c=n("ff38"),l=n("96c3"),p=Object(o["a"])("notify"),f=p[0],d=p[1];function m(e,t,n,r){var a={color:t.color,background:t.background};return e(l["a"],s()([{attrs:{value:t.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:a,class:[d([t.type]),t.className]},Object(i["b"])(r,!0)]),[(null==n.default?void 0:n.default())||t.message])}m.props=Object(r["a"])({},c["b"],{color:String,message:[Number,String],duration:[Number,String],className:null,background:String,getContainer:[String,Function],type:{type:String,default:"danger"}});var b,g,v=f(m),h=n("10cd");function y(e){return Object(h["e"])(e)?e:{message:e}}function w(e){if(!h["g"])return g||(g=Object(i["c"])(v,{on:{click:function(e){g.onClick&&g.onClick(e)},close:function(){g.onClose&&g.onClose()},opened:function(){g.onOpened&&g.onOpened()}}})),e=Object(r["a"])({},w.currentOptions,y(e)),Object(r["a"])(g,e),clearTimeout(b),e.duration&&e.duration>0&&(b=setTimeout(w.clear,e.duration)),g}function k(){return{type:"danger",value:!0,message:"",color:void 0,background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}w.clear=function(){g&&(g.value=!1)},w.currentOptions=k(),w.setDefaultOptions=function(e){Object(r["a"])(w.currentOptions,e)},w.resetDefaultOptions=function(){w.currentOptions=k()},w.install=function(){a["a"].use(v)},w.Component=v,a["a"].prototype.$notify=w;t["a"]=w},c24f:function(e,t,n){"use strict";n.d(t,"k",(function(){return u})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"m",(function(){return k})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return S}));n("6a61");var r=n("cf7f"),a=n("ed08");function u(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("/user/login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get("/user/verifyCode",{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get("/user/SendMailVerifyCode",{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("/user/modileLogin",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return a["a"].put("/user/modifyPwdByMobile",e)}function m(e){return a["a"].put("/user/modifyPwdByEmail",e)}function b(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("/user/registry",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function v(){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get("/user/getUserByToken",{params:{token:localStorage.getItem("vtoken")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return w=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get("/user/getUserInfo",{params:{uid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].put("/user/updataUserInfo",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(e,t){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n?"/user/upload?uid=".concat(n):"/user/upload",e.next=3,a["a"].post(r,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function C(e){return R.apply(this,arguments)}function R(){return R=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get("/user/historyAvatar",{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function S(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].put("/user/cutAvatar",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},d640:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h2",[e._v("登录")]),n("p",{staticClass:"tab"},[n("span",{class:{active:0===e.tab},on:{click:function(t){return e.tabc(0)}}},[e._v("密码登录")]),n("span",{class:{active:1===e.tab},on:{click:function(t){return e.tabc(1)}}},[e._v("手机号登录")])]),0===e.tab?n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("span",{staticClass:"forgetPwd",on:{click:function(t){return e.$router.history.push("/forgetpwd")}}},[e._v("忘记密码?")]),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 提交 ")])],1)],1):e._e(),1===e.tab?n("van-form",{on:{submit:e.onmobile}},[n("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),n("van-field",{attrs:{name:"verifyCode",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),n("span",{class:e.verifyclass?"db":"verify",on:{click:e.getverify}},[e._v(e._s(e.msg))]),n("span",{staticClass:"forgetPwd",on:{click:function(t){return e.$router.history.push("/forgetpwd")}}},[e._v("忘记密码?")]),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 提交 ")])],1)],1):e._e(),n("van-button",{staticStyle:{width:"90%",margin:"0 auto"},attrs:{round:"",block:"",type:"info"},on:{click:function(t){return e.$router.history.push("/register")}}},[e._v(" 注册 ")])],1)},a=[],u=(n("0517"),n("b6f5")),s=n("c24f"),o=n("a593");o["a"].use(u["a"]);var i={data:function(){return{username:"",password:"",mobile:"",tab:0,verifyCode:"",msg:"获取验证码",verifyclass:!1,t:null}},methods:{onSubmit:function(e){var t=this;Object(s["k"])(e).then((function(e){e.data.code?Object(u["a"])({type:"success",message:e.data.msg,duration:2e3,onClose:function(){t.username=t.password="",localStorage.setItem("vtoken",e.data.token),t.$router.history.push("/")}}):Object(u["a"])({type:"danger",message:e.data.msg+"请先注册",duration:2e3,onClose:function(){t.username=t.password=""}})}))},tabc:function(e){this.tab=e},onmobile:function(e){var t=this;Object(s["j"])(e).then((function(e){e.data.code?Object(u["a"])({type:"success",message:"登陆成功",duration:2e3,onClose:function(){localStorage.setItem("vtoken",e.data.token),t.$router.history.push("/")}}):Object(u["a"])({type:"danger",message:e.data.msg,duration:2e3,onClose:function(){t.mobile=t.verifyCode="",t.msg="获取验证码",clearInterval(t.t),t.verifyclass=!1}})}))},getverify:function(){var e=this,t=/^1[3578]\d{9}$/;if(!t.test(this.mobile))return Object(u["a"])({type:"danger",message:"请输入正确的手机号"});Object(s["f"])({mobile:this.mobile}).then((function(e){e.data.code&&Object(u["a"])({type:"success",message:"您的验证码为"+e.data.verifyCode})}));var n=60;this.verifyclass||(this.verifyclass=!0,this.t=setInterval((function(){e.msg="剩余".concat(n,"秒"),n--,0===n&&(e.msg="获取验证码",clearInterval(e.t),e.verifyclass=!1)}),1e3))}}},c=i,l=(n("9b1c"),n("9ca4")),p=Object(l["a"])(c,r,a,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-d2988686.8939ab44.js.map