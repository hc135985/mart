{"version":3,"sources":["webpack:///./node_modules/_vant@2.10.9@vant/es/notify/style/index.js","webpack:///./src/containers/user/Avatar.vue?05eb","webpack:///src/containers/user/Avatar.vue","webpack:///./src/containers/user/Avatar.vue?195f","webpack:///./src/containers/user/Avatar.vue","webpack:///./node_modules/_vant@2.10.9@vant/es/notify/Notify.js","webpack:///./node_modules/_vant@2.10.9@vant/es/notify/index.js","webpack:///./src/api/user.js","webpack:///./src/containers/user/Avatar.vue?4779"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","$router","history","go","_v","attrs","readFiles","model","value","callback","$$v","fileList","expression","_l","imgUrl","key","aid","cutAvatar","staticRenderFns","component","_createNamespace","create","createComponent","bem","Notify","h","props","slots","ctx","style","color","background","type","className","default","message","popup","String","Number","duration","getContainer","Function","timer","instance","parseOptions","options","click","event","onClick","close","onClose","opened","onOpened","currentOptions","clearTimeout","setTimeout","clear","defaultOptions","undefined","setDefaultOptions","resetDefaultOptions","install","use","Component","prototype","$notify","_passwordlogin","action","request","post","_getverify","acction","get","params","_getMmailVerify","_modilelogin","_modifyPwdByMobile","put","_modifyPwdByEmail","_registryuser","_getUserIdByToken","token","localStorage","getItem","_getUserInfoByUid","uid","_setUserInfoByUid","_imgUpload","url","_getAvatarList","_cutAvatar"],"mappings":"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","file":"js/chunk-65c6b3e6.102c3e41.js","sourcesContent":["import '../../style/base.css';\nimport '../../overlay/index.css';\nimport '../../info/index.css';\nimport '../../icon/index.css';\nimport '../../popup/index.css';\nimport '../index.css';","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_c('span',{on:{\"click\":function($event){return _vm.$router.history.go(-1)}}},[_vm._v(\"《 \")]),_vm._v(\"历史头像\")]),_c('h4',[_vm._v(\"请上传头像\")]),_c('van-uploader',{attrs:{\"multiple\":\"\",\"after-read\":_vm.readFiles},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}}),_c('h4',[_vm._v(\"历史头像\")]),_c('ul',_vm._l((_vm.avatarList),function(imgUrl){return _c('van-image',{key:imgUrl.aid,attrs:{\"round\":\"\",\"width\":\"90\",\"height\":\"90\",\"lazy-load\":\"\",\"src\":imgUrl.imgUrl},on:{\"click\":function($event){return _vm.cutAvatar(imgUrl.imgUrl)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h2><span @click=\"$router.history.go(-1)\">《 </span>历史头像</h2>\r\n    <h4>请上传头像</h4>\r\n    <van-uploader v-model=\"fileList\" multiple :after-read=\"readFiles\" />\r\n    <h4>历史头像</h4>\r\n    <ul>\r\n      <van-image\r\n        v-for=\"imgUrl in avatarList\"\r\n        :key=\"imgUrl.aid\"\r\n        round\r\n        width=\"90\"\r\n        height=\"90\"\r\n        lazy-load\r\n        :src=\"imgUrl.imgUrl\"\r\n        @click=\"cutAvatar(imgUrl.imgUrl)\"\r\n      />\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    _getUserIdByToken,\r\n    _imgUpload,\r\n    _getAvatarList,\r\n    _cutAvatar,\r\n  } from '@/api/user';\r\n  import { Notify } from 'vant';\r\n  export default {\r\n    data() {\r\n      return {\r\n        avatarList: [],\r\n        fileList: [],\r\n        uid: '',\r\n      };\r\n    },\r\n    mounted() {\r\n      this.getavatar();\r\n    },\r\n    methods: {\r\n      async getavatar() {\r\n        let result = await _getUserIdByToken();\r\n        let avatarLi = await _getAvatarList({ uid: result.data.uid });\r\n        this.uid = result.data.uid;\r\n        this.avatarList = avatarLi.data.data;\r\n      },\r\n      async cutAvatar(imgUrl) {\r\n        let result = await _cutAvatar({ uid: this.uid, imgUrl });\r\n        if (result.data.code) {\r\n          Notify({\r\n            type: 'success',\r\n            message: result.data.msg,\r\n            duration: 1000,\r\n            onClose: () => {\r\n              this.$router.history.go(-1);\r\n            },\r\n          });\r\n        }\r\n      },\r\n      async readFiles({ file }) {\r\n        let readFrom = new FormData();\r\n        readFrom.append('image1', file);\r\n        let result = await _imgUpload(readFrom, this.uid);\r\n        if (result.data.code) {\r\n          Notify({\r\n            type: 'success',\r\n            message: result.data.msg,\r\n            duration: 1000,\r\n            onClose: () => {\r\n              this.$router.history.go(-1);\r\n              this.fileList = [];\r\n            },\r\n          });\r\n        }\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  h2 {\r\n    width: 100%;\r\n    text-align: center;\r\n    border-bottom: 1px solid #000;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    span {\r\n      float: left;\r\n    }\r\n  }\r\n  h4 {\r\n    margin: 10px;\r\n  }\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .van-image {\r\n      margin: 20px 10px;\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=1c39367a&scoped=true&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Avatar.vue?vue&type=style&index=0&id=1c39367a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c39367a\",\n  null\n  \n)\n\nexport default component.exports","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { inherit } from '../utils/functional'; // Mixins\n\nimport { popupMixinProps } from '../mixins/popup'; // Components\n\nimport Popup from '../popup'; // Types\n\nvar _createNamespace = createNamespace('notify'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction Notify(h, props, slots, ctx) {\n  var style = {\n    color: props.color,\n    background: props.background\n  };\n  return h(Popup, _mergeJSXProps([{\n    \"attrs\": {\n      \"value\": props.value,\n      \"position\": \"top\",\n      \"overlay\": false,\n      \"duration\": 0.2,\n      \"lockScroll\": false\n    },\n    \"style\": style,\n    \"class\": [bem([props.type]), props.className]\n  }, inherit(ctx, true)]), [(slots.default == null ? void 0 : slots.default()) || props.message]);\n}\n\nNotify.props = _extends({}, popupMixinProps, {\n  color: String,\n  message: [Number, String],\n  duration: [Number, String],\n  className: null,\n  background: String,\n  getContainer: [String, Function],\n  type: {\n    type: String,\n    default: 'danger'\n  }\n});\nexport default createComponent(Notify);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VanNotify from './Notify';\nimport { isObject, isServer } from '../utils';\nimport { mount } from '../utils/functional';\nvar timer;\nvar instance;\n\nfunction parseOptions(message) {\n  return isObject(message) ? message : {\n    message: message\n  };\n}\n\nfunction Notify(options) {\n  /* istanbul ignore if */\n  if (isServer) {\n    return;\n  }\n\n  if (!instance) {\n    instance = mount(VanNotify, {\n      on: {\n        click: function click(event) {\n          if (instance.onClick) {\n            instance.onClick(event);\n          }\n        },\n        close: function close() {\n          if (instance.onClose) {\n            instance.onClose();\n          }\n        },\n        opened: function opened() {\n          if (instance.onOpened) {\n            instance.onOpened();\n          }\n        }\n      }\n    });\n  }\n\n  options = _extends({}, Notify.currentOptions, parseOptions(options));\n\n  _extends(instance, options);\n\n  clearTimeout(timer);\n\n  if (options.duration && options.duration > 0) {\n    timer = setTimeout(Notify.clear, options.duration);\n  }\n\n  return instance;\n}\n\nfunction defaultOptions() {\n  return {\n    type: 'danger',\n    value: true,\n    message: '',\n    color: undefined,\n    background: undefined,\n    duration: 3000,\n    className: '',\n    onClose: null,\n    onClick: null,\n    onOpened: null\n  };\n}\n\nNotify.clear = function () {\n  if (instance) {\n    instance.value = false;\n  }\n};\n\nNotify.currentOptions = defaultOptions();\n\nNotify.setDefaultOptions = function (options) {\n  _extends(Notify.currentOptions, options);\n};\n\nNotify.resetDefaultOptions = function () {\n  Notify.currentOptions = defaultOptions();\n};\n\nNotify.install = function () {\n  Vue.use(VanNotify);\n};\n\nNotify.Component = VanNotify;\nVue.prototype.$notify = Notify;\nexport default Notify;","import { request } from '../utils/index'\r\n\r\n\r\nexport async function _passwordlogin(action) {\r\n    return await request.post('/user/login', action)\r\n}\r\n\r\nexport async function _getverify(acction) {\r\n    return await request.get('/user/verifyCode', {\r\n        params: acction\r\n    })\r\n}\r\nexport async function _getMmailVerify(acction) {\r\n    return await request.get('/user/SendMailVerifyCode', {\r\n        params: acction\r\n    })\r\n}\r\nexport async function _modilelogin(action) {\r\n    return await request.post('/user/modileLogin', action)\r\n}\r\n\r\nexport function _modifyPwdByMobile(action) {\r\n    return request.put('/user/modifyPwdByMobile', action)\r\n}\r\nexport function _modifyPwdByEmail(action) {\r\n    return request.put('/user/modifyPwdByEmail', action)\r\n}\r\n\r\nexport async function _registryuser(action) {\r\n    return await request.post('/user/registry', action)\r\n}\r\n\r\nexport async function _getUserIdByToken() {\r\n    return await request.get('/user/getUserByToken', {\r\n        params: {\r\n            token: localStorage.getItem('vtoken')\r\n        }\r\n    })\r\n}\r\nexport async function _getUserInfoByUid(uid) {\r\n    return await request.get('/user/getUserInfo', {\r\n        params: {\r\n            uid\r\n        }\r\n    })\r\n}\r\nexport async function _setUserInfoByUid(action) {\r\n    return await request.put('/user/updataUserInfo', action)\r\n}\r\n\r\n\r\nexport async function _imgUpload(acction, uid) {\r\n    let url = uid ? `/user/upload?uid=${uid}` : '/user/upload'\r\n    return await request.post(url, acction)\r\n}\r\n\r\n\r\nexport async function _getAvatarList(acction) {\r\n    return await request.get('/user/historyAvatar', { params: acction })\r\n}\r\n\r\nexport async function _cutAvatar(acction) {\r\n    return await request.put('/user/cutAvatar', acction)\r\n}","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=style&index=0&id=1c39367a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=style&index=0&id=1c39367a&lang=scss&scoped=true&\""],"sourceRoot":""}